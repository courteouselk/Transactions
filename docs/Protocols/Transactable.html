<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Transactable Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Protocol/Transactable" class="dashAnchor"></a>
    <a title="Transactable Protocol Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">Transactions Docs</a></p>
        <p class="header-right"><a href="https://github.com/courteouselk/Transactions"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">Transactions Reference</a>
        <img id="carat" src="../img/carat.png" />
        Transactable Protocol Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/TransactionContext.html">TransactionContext</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/TransactionError.html">TransactionError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/Transactable.html">Transactable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/Transaction.html">Transaction</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>Transactable</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">Transactable</span> <span class="p">:</span> <span class="kt">AnyObject</span></code></pre>

                </div>
              </div>
            <p>Transaction-aware object.</p>

<p>Conforming object change their state as a part of transaction.  Each individual transaction 
will encapsulate changes to all of the objects in transaction context tree and only commit if 
all of them report no consistency errors.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Protocol%20requirements"></a>
                <a name="//apple_ref/swift/Section/Protocol requirements" class="dashAnchor"></a>
                <a href="#/Protocol%20requirements">
                  <h3 class="section-name">Protocol requirements</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vP12Transactions12Transactable18transactionContextCS_18TransactionContext"></a>
                    <a name="//apple_ref/swift/Property/transactionContext" class="dashAnchor"></a>
                    <a class="token" href="#/s:vP12Transactions12Transactable18transactionContextCS_18TransactionContext">transactionContext</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Transaction context owned by a transactable.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="k">var</span> <span class="nv">transactionContext</span><span class="p">:</span> <span class="kt"><a href="../Classes/TransactionContext.html">TransactionContext</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12Transactions12Transactable7onBeginFT11transactionVS_11Transaction_T_"></a>
                    <a name="//apple_ref/swift/Method/onBegin(transaction:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12Transactions12Transactable7onBeginFT11transactionVS_11Transaction_T_">onBegin(transaction:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call-back method for transaction begin.</p>

<p>This method is called at the beginning of each transaction to allow the transactable object
to make all necessary preparations before the transaction starts.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">onBegin</span><span class="p">(</span><span class="nv">transaction</span><span class="p">:</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12Transactions12Transactable16onValidateCommitFzT_T_"></a>
                    <a name="//apple_ref/swift/Method/onValidateCommit()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12Transactions12Transactable16onValidateCommitFzT_T_">onValidateCommit()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call-back method that verifies whether a transaction is good to commit the changes.</p>

<p>This method is called by the context prior transaction commit.  If no one of the 
transactables in the context tree throws an error, the commit can proceed.</p>

<div class="aside aside-throws">
    <p class="aside-title">Throws</p>
    An error is thrown in case if the transaction can not be commited.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">onValidateCommit</span><span class="p">()</span> <span class="k">throws</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12Transactions12Transactable8onCommitFT11transactionVS_11Transaction_T_"></a>
                    <a name="//apple_ref/swift/Method/onCommit(transaction:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12Transactions12Transactable8onCommitFT11transactionVS_11Transaction_T_">onCommit(transaction:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call-back method for transaction commit.</p>

<p>This method is called when the transaction commit is requested.  The transactable should 
incorporate all staged changes into an active state.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">onCommit</span><span class="p">(</span><span class="nv">transaction</span><span class="p">:</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP12Transactions12Transactable10onRollbackFT11transactionVS_11Transaction_T_"></a>
                    <a name="//apple_ref/swift/Method/onRollback(transaction:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP12Transactions12Transactable10onRollbackFT11transactionVS_11Transaction_T_">onRollback(transaction:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Call-back method for transaction rollback.</p>

<p>This method is called when the transaction is being rolled back.  The transactable should
discard any staged changes and reset its state.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">onRollback</span><span class="p">(</span><span class="nv">transaction</span><span class="p">:</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Default%20implementations"></a>
                <a name="//apple_ref/swift/Section/Default implementations" class="dashAnchor"></a>
                <a href="#/Default%20implementations">
                  <h3 class="section-name">Default implementations</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vE12TransactionsPS_12Transactable19transactionIsActiveSb"></a>
                    <a name="//apple_ref/swift/Property/transactionIsActive" class="dashAnchor"></a>
                    <a class="token" href="#/s:vE12TransactionsPS_12Transactable19transactionIsActiveSb">transactionIsActive</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Indicates whether the transaction is currently active.</p>

<div class="aside aside-important">
    <p class="aside-title">Important</p>
    This property is not supposed to be implemented by the adopting class.
         Please use the default implementation.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">transactionIsActive</span><span class="p">:</span> <span class="kt">Bool</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:vE12TransactionsPS_12Transactable17activeTransactionGSqVS_11Transaction_"></a>
                    <a name="//apple_ref/swift/Property/activeTransaction" class="dashAnchor"></a>
                    <a class="token" href="#/s:vE12TransactionsPS_12Transactable17activeTransactionGSqVS_11Transaction_">activeTransaction</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Currently active transaction.</p>

<p>If no transaction is active the value is <code>nil</code>.</p>

<div class="aside aside-important">
    <p class="aside-title">Important</p>
    This property is not supposed to be implemented by the adopting class.
         Please use the default implementation.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">activeTransaction</span><span class="p">:</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FE12TransactionsPS_12Transactable16beginTransactionFzT_VS_11Transaction"></a>
                    <a name="//apple_ref/swift/Method/beginTransaction()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FE12TransactionsPS_12Transactable16beginTransactionFzT_VS_11Transaction">beginTransaction()</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Begin a new transaction.</p>

<div class="aside aside-throws">
    <p class="aside-title">Throws</p>
    <p>Can throw an instance of <code><a href="../Enums/TransactionError.html">TransactionError</a></code> (e.g. if another transaction is
      already active).</p>

</div>

<div class="aside aside-important">
    <p class="aside-title">Important</p>
    <p>This method is not supposed to be implemented by the adopting class.
         Please use the default implementation.</p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">@discardableResult</span> <span class="kd">public</span> <span class="kd">func</span> <span class="nf">beginTransaction</span><span class="p">()</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>The descriptor for a newly started transaction.</p>

                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FE12TransactionsPS_12Transactable17commitTransactionFzVS_11TransactionT_"></a>
                    <a name="//apple_ref/swift/Method/commitTransaction(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FE12TransactionsPS_12Transactable17commitTransactionFzVS_11TransactionT_">commitTransaction(_:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Commit the transaction.</p>

<div class="aside aside-throws">
    <p class="aside-title">Throws</p>
    <p>Can throw an instance of <code><a href="../Enums/TransactionError.html">TransactionError</a></code> (e.g. if no transaction is actually
      active) or whatever <code>Error</code> returned by one of the transactable
      <code>.hasCommittabilityError()</code> methods.</p>

</div>

<div class="aside aside-important">
    <p class="aside-title">Important</p>
    <p>This method is not supposed to be implemented by the adopting class.
         Please use the default implementation.</p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">commitTransaction</span><span class="p">(</span><span class="n">_</span> <span class="nv">transaction</span><span class="p">:</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span> <span class="o">=</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span><span class="o">.</span><span class="n">any</span><span class="p">)</span> <span class="k">throws</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>transaction</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The descriptor of the transaction to commit.  If this parameter is not omitted then the context will check whether it matches to the actually active one.  If they do not match, an error is thrown.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FE12TransactionsPS_12Transactable19rollbackTransactionFzVS_11TransactionT_"></a>
                    <a name="//apple_ref/swift/Method/rollbackTransaction(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FE12TransactionsPS_12Transactable19rollbackTransactionFzVS_11TransactionT_">rollbackTransaction(_:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Rollback the transaction.</p>

<div class="aside aside-throws">
    <p class="aside-title">Throws</p>
    <p>Can throw an instance of <code><a href="../Enums/TransactionError.html">TransactionError</a></code> (e.g. if no transaction is actually
      active).</p>

</div>

<div class="aside aside-important">
    <p class="aside-title">Important</p>
    <p>This method is not supposed to be implemented by the adopting class.
         Please use the default implementation.</p>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">rollbackTransaction</span><span class="p">(</span><span class="n">_</span> <span class="nv">transaction</span><span class="p">:</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span> <span class="o">=</span> <span class="kt"><a href="../Structs/Transaction.html">Transaction</a></span><span class="o">.</span><span class="n">any</span><span class="p">)</span> <span class="k">throws</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>transaction</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The descriptor of the transaction to rollback.  If this parameter is not omitted then the context will check whether it matches to the actually active one.  If they do not match, an error is thrown.</p>

                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="" target="_blank" rel="external">Anton Bronnikov</a>. All rights reserved. (Last updated: 2017-04-06)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.5</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
